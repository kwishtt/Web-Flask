{% extends "base.html" %}

{% block title %}PhÃ¢n tÃ­ch dá»¯ liá»‡u phim - Movie Data Analytics{% endblock %}

{% block content %}
<section class="data-header">
    <div class="container section-header">
        <p class="eyebrow">Data Analytics</p>
        <h1>PhÃ¢n tÃ­ch dá»¯ liá»‡u phim Ä‘Ã£ tá»«ng chiáº¿u ráº¡p táº¡i Viá»‡t Nam</h1>
        <p>KhÃ¡m phÃ¡ insights tá»« dataset {{ stats.total_movies }} bá»™ phim tá»« nhiá»u quá»‘c gia thÃ´ng qua biá»ƒu Ä‘á»“ trá»±c quan</p>
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number">{{ stats.total_movies }}</span>
                <span class="stat-label">Tá»•ng sá»‘ phim</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">{{ "%.1f"|format(stats.success_rate) }}%</span>
                <span class="stat-label">Tá»· lá»‡ thÃ nh cÃ´ng</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">${{ "{:,.0f}".format(stats.avg_budget) }}</span>
                <span class="stat-label">NgÃ¢n sÃ¡ch TB</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">{{ "%.1f"|format(stats.avg_vote) }}</span>
                <span class="stat-label">Äiá»ƒm TB</span>
            </div>
        </div>
    </div>
</section>

<section class="data-visualizations">
    <div class="container">
        <div class="chart-grid">
            <!-- Budget Distribution -->
            <div class="chart-card">
                <h3>ğŸ“Š PhÃ¢n bá»‘ ngÃ¢n sÃ¡ch sáº£n xuáº¥t</h3>
                <div class="chart-container">
                    {{ budget_dist|safe }}
                </div>
                <p class="chart-description">
                    PhÃ¢n bá»‘ ngÃ¢n sÃ¡ch Ä‘a dáº¡ng tá»« indie films Ä‘áº¿n blockbusters, pháº£n Ã¡nh thá»‹ trÆ°á»ng Ä‘iá»‡n áº£nh toÃ n cáº§u.
                </p>
            </div>

            <!-- Vote Average Distribution -->
            <div class="chart-card">
                <h3>â­ PhÃ¢n bá»‘ Ä‘iá»ƒm Ä‘Ã¡nh giÃ¡</h3>
                <div class="chart-container">
                    {{ vote_dist|safe }}
                </div>
                <p class="chart-description">
                    Äiá»ƒm Ä‘Ã¡nh giÃ¡ táº­p trung chá»§ yáº¿u tá»« 5.5 Ä‘áº¿n 7.5, cho tháº¥y cháº¥t lÆ°á»£ng phim tÆ°Æ¡ng Ä‘á»‘i Ä‘á»“ng Ä‘á»u trÃªn toÃ n cáº§u.
                </p>
            </div>

            <!-- Budget vs Revenue Scatter -->
            <div class="chart-card chart-full">
                <h3>ğŸ’° Má»‘i quan há»‡ NgÃ¢n sÃ¡ch - Doanh thu</h3>
                <div class="chart-container">
                    {{ budget_revenue|safe }}
                </div>
                <p class="chart-description">
                    MÃ u xanh lÃ¡: Phim thÃ nh cÃ´ng (ROI â‰¥1 & Vote â‰¥6.5), MÃ u Ä‘á»: Phim khÃ´ng thÃ nh cÃ´ng.
                    CÃ¡c Ä‘iá»ƒm á»Ÿ trÃªn Ä‘Æ°á»ng chÃ©o cho tháº¥y phim cÃ³ lÃ£i.
                </p>
            </div>

            <!-- Genre Distribution -->
            <div class="chart-card">
                <h3>ğŸ­ Thá»ƒ loáº¡i phim phá»• biáº¿n</h3>
                <div class="chart-container">
                    {{ genre_dist|safe }}
                </div>
                <p class="chart-description">
                    Drama lÃ  thá»ƒ loáº¡i phá»• biáº¿n nháº¥t trÃªn toÃ n cáº§u, theo sau bá»Ÿi Action, Comedy vÃ  Thriller.
                </p>
            </div>

            <!-- Runtime Distribution -->
            <div class="chart-card">
                <h3>â±ï¸ PhÃ¢n bá»‘ thá»i lÆ°á»£ng phim</h3>
                <div class="chart-container">
                    {{ runtime_dist|safe }}
                </div>
                <p class="chart-description">
                    Háº§u háº¿t cÃ¡c phim cÃ³ thá»i lÆ°á»£ng tá»« 90-120 phÃºt, phÃ¹ há»£p vá»›i Ä‘á»‹nh dáº¡ng phim truyá»‡n.
                </p>
            </div>

            <!-- Yearly Trends -->
            <div class="chart-card chart-full">
                <h3>ğŸ“ˆ Xu hÆ°á»›ng sáº£n xuáº¥t vÃ  thÃ nh cÃ´ng theo nÄƒm</h3>
                <div class="chart-container">
                    {{ yearly_trend|safe }}
                </div>
                <p class="chart-description">
                    Sá»‘ lÆ°á»£ng phim sáº£n xuáº¥t vÃ  tá»· lá»‡ thÃ nh cÃ´ng thay Ä‘á»•i theo thá»i gian. Dá»¯ liá»‡u tá»« {{ stats.year_range }}.
                </p>
            </div>

            <!-- Vote Analysis -->
            <div class="chart-card chart-full">
                <h3>ğŸ“Š PhÃ¢n tÃ­ch Ä‘Ã¡nh giÃ¡ chi tiáº¿t</h3>
                <div class="chart-container">
                    {{ vote_analysis|safe }}
                </div>
                <p class="chart-description">
                    Má»‘i quan há»‡ giá»¯a sá»‘ lÆ°á»£ng ngÆ°á»i Ä‘Ã¡nh giÃ¡ vÃ  Ä‘iá»ƒm trung bÃ¬nh. Phim thÃ nh cÃ´ng thÆ°á»ng cÃ³ nhiá»u Ä‘Ã¡nh giÃ¡ hÆ¡n.
                </p>
            </div>

            <!-- ROI Distribution -->
            <div class="chart-card chart-full">
                <h3>ğŸ’¸ PhÃ¢n bá»‘ tá»· suáº¥t lá»£i nhuáº­n (ROI)</h3>
                <div class="chart-container">
                    {{ roi_dist|safe }}
                </div>
                <p class="chart-description">
                    ROI Ã¢m (< 0%) = thua lá»—, ROI dÆ°Æ¡ng (> 0%) = lÃ£i. ÄÆ°á»ng Ä‘á»©t nÃ©t Ä‘á» lÃ  Ä‘iá»ƒm hÃ²a vá»‘n.
                </p>
            </div>
        </div>
    </div>
</section>

<section class="data-insights">
    <div class="container">
        <h2>ğŸ” Insights chÃ­nh tá»« dá»¯ liá»‡u</h2>
        <div class="insights-grid">
            <div class="insight-card">
                <h4>ğŸ¯ Yáº¿u tá»‘ quyáº¿t Ä‘á»‹nh thÃ nh cÃ´ng</h4>
                <ul>
                    <li>NgÃ¢n sÃ¡ch há»£p lÃ½ (khÃ´ng quÃ¡ cao hoáº·c quÃ¡ tháº¥p)</li>
                    <li>Äiá»ƒm Ä‘Ã¡nh giÃ¡ trÃªn 6.5</li>
                    <li>Thá»i lÆ°á»£ng phim 90-120 phÃºt</li>
                    <li>Thá»ƒ loáº¡i Drama vÃ  Comedy Ä‘Æ°á»£c Æ°a chuá»™ng</li>
                </ul>
            </div>
            <div class="insight-card">
                <h4>ğŸ“Š Thá»‘ng kÃª tá»•ng quan</h4>
                <ul>
                    <li>{{ stats.genres_count }} thá»ƒ loáº¡i phim khÃ¡c nhau</li>
                    <li>Doanh thu trung bÃ¬nh: ${{ "{:,.0f}".format(stats.avg_revenue) }}</li>
                    <li>Thá»i lÆ°á»£ng trung bÃ¬nh: {{ "%.0f"|format(stats.avg_runtime) }} phÃºt</li>
                    <li>Dá»¯ liá»‡u tá»« nÄƒm {{ stats.year_range.split(' - ')[0] }} Ä‘áº¿n {{ stats.year_range.split(' - ')[1] }}</li>
                </ul>
            </div>
            <div class="insight-card">
                <h4>ğŸ’¡ Khuyáº¿n nghá»‹ cho nhÃ  sáº£n xuáº¥t</h4>
                <ul>
                    <li>Táº­p trung vÃ o cháº¥t lÆ°á»£ng ná»™i dung hÆ¡n ngÃ¢n sÃ¡ch</li>
                    <li>Chá»n thá»i Ä‘iá»ƒm phÃ¡t hÃ nh phÃ¹ há»£p</li>
                    <li>Äáº§u tÆ° marketing Ä‘á»ƒ tÄƒng vote count</li>
                    <li>Há»c há»i tá»« cÃ¡c phim thÃ nh cÃ´ng trong dataset</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="data-actions">
    <div class="container">
        <div class="actions-grid">
            <a href="{{ url_for('home') }}" class="btn">Dá»± Ä‘oÃ¡n phim má»›i</a>
            <a href="#data-header" class="btn-outline">Xem láº¡i biá»ƒu Ä‘á»“</a>
        </div>
    </div>
</section>
{% endblock %}