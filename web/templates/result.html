{% extends "base.html" %}

{% block title %}K·∫øt qu·∫£ d·ª± ƒëo√°n - {{ title }}{% endblock %}

{% block content %}
<section class="result">
    <div class="container result-grid">
        <div class="result-summary">
            <h1>K·∫øt qu·∫£ d·ª± ƒëo√°n cho phim "{{ title }}"</h1>
            <div class="prediction-score">
                <div class="score-circle score-{{ color }}">
                    <span class="score-number">{{ confidence }}%</span>
                    <span class="score-label">Confidence</span>
                </div>
                <div class="score-info">
                    <h2 class="level-{{ color }}">{{ prediction }}</h2>
                    <p>M√¥ h√¨nh AI d·ª± ƒëo√°n phim n√†y s·∫Ω {{ prediction.lower() }}</p>
                </div>
            </div>
        </div>

        <div class="result-details">
            <h3>Th√¥ng tin chi ti·∫øt</h3>
            <div class="details-grid">
                <div class="detail-item">
                    <span class="detail-label">Ng√¢n s√°ch s·∫£n xu·∫•t</span>
                    <span class="detail-value">${{ "{:,.0f}".format(budget) }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Th·ªÉ lo·∫°i</span>
                    <span class="detail-value">{{ genre }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">ƒê√°nh gi√° trung b√¨nh</span>
                    <span class="detail-value">{{ vote_average }}/10</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">S·ªë l∆∞·ª£ng ƒë√°nh gi√°</span>
                    <span class="detail-value">{{ "{:,.0f}".format(vote_count) }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Th·ªùi l∆∞·ª£ng</span>
                    <span class="detail-value">{{ runtime }} ph√∫t</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">NƒÉm ph√°t h√†nh</span>
                    <span class="detail-value">{{ release_year }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Th√°ng ph√°t h√†nh</span>
                    <span class="detail-value">{{ release_month }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Qu·ªëc gia s·∫£n xu·∫•t</span>
                    <span class="detail-value">{{ country }}</span>
                </div>
            </div>
        </div>

        <div class="result-actions">
            <a href="{{ url_for('home') }}" class="btn">D·ª± ƒëo√°n phim kh√°c</a>
            <a href="{{ url_for('data_analysis') }}" class="btn-outline">Xem ph√¢n t√≠ch d·ªØ li·ªáu</a>
        </div>

        <div class="result-explanation">
            <h3>Gi·∫£i th√≠ch d·ª± ƒëo√°n</h3>
            <div class="model-info">
                <p><strong>ü§ñ M√¥ h√¨nh:</strong> {{ model_name }}</p>
                <p><strong>üéØ Threshold:</strong> {{ threshold }}%</p>
                <p><strong>üìä X√°c su·∫•t th√†nh c√¥ng:</strong> {{ probability }}%</p>
            </div>
            <p>D·ª± ƒëo√°n n√†y ƒë∆∞·ª£c t√≠nh d·ª±a tr√™n m√¥ h√¨nh ML ti√™n ti·∫øn v·ªõi c√°c y·∫øu t·ªë:</p>
            <ul>
                <li><strong>Ng√¢n s√°ch & Th·ªùi l∆∞·ª£ng:</strong> Y·∫øu t·ªë kinh t·∫ø quan tr·ªçng</li>
                <li><strong>ƒê√°nh gi√° & S·ªë l∆∞·ª£ng vote:</strong> Ch·∫•t l∆∞·ª£ng n·ªôi dung</li>
                <li><strong>Th·ªùi gian ph√°t h√†nh:</strong> Y·∫øu t·ªë th·ªùi v·ª• (m√πa, ng√†y trong tu·∫ßn)</li>
                <li><strong>Th·ªÉ lo·∫°i & Qu·ªëc gia:</strong> S·ªü th√≠ch th·ªã tr∆∞·ªùng</li>
                <li><strong>Feature Engineering:</strong> ROI, budget per minute, vote score, v√† c√°c t∆∞∆°ng t√°c ph·ª©c t·∫°p</li>
            </ul>
            <p class="note">* M√¥ h√¨nh ƒë∆∞·ª£c train v·ªõi hyperparameter tuning, SMOTE cho imbalance handling, v√† threshold optimization ƒë·ªÉ t·ªëi ∆∞u F1-Score.</p>
        </div>
    </div>
</section>
{% endblock %}